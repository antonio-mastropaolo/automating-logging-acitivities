\documentclass[acmsmall,screen,review]{acmart}

\AtBeginDocument{%
  \providecommand\BibTeX{{%
    Bib\TeX}}}


\setcopyright{acmcopyright}
\copyrightyear{2018}
\acmYear{2018}
\acmDOI{XXXXXXX.XXXXXXX}


%%
%% These commands are for a JOURNAL article.
\acmJournal{JACM}
\acmVolume{37}
\acmNumber{4}
\acmArticle{111}
\acmMonth{8}


%\usepackage{cite}
\usepackage{amsmath,amsfonts}
\usepackage{algorithmic}
\usepackage{graphicx}
\usepackage{textcomp}
\usepackage{xcolor}
\usepackage{xspace}
\usepackage{fontawesome}
\usepackage{multirow}
\usepackage{rotating}
\usepackage{tikz}
\usepackage{soul}
\usepackage{makecell}
\usepackage{url}
\usepackage{enumitem}
\usepackage{booktabs}
\usepackage{fontawesome}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{pifont}
\usepackage{multicol}
\usepackage{tcolorbox}
\usepackage{pifont}% http://ctan.org/pkg/pifont
\newcommand{\cmark}{\ding{51}}%
\newcommand{\xmark}{\ding{55}}%


\newcommand\TODO[1]{\textcolor{red}{#1}}
\newcommand\REMOVE[1]{\textcolor{red}{\st{#1}}}
\newcommand\ANTONIO[1]{\textcolor{blue}{{ANTONIO}{#1}}}
\newcommand\LUCA[1]{\textcolor{green}{{LUCA}{#1}}}
\newcommand\GABRIELE[1]{\textcolor{red}{{GABRIELE}{#1}}}
\newcommand{\ie}{\emph{i.e.,}\xspace}
\newcommand{\eg}{\emph{e.g.,}\xspace}
\newcommand{\etc}{etc.\xspace}
\newcommand{\etal}{\emph{et~al.}\xspace}
\newcommand{\secref}[1]{Section~\ref{#1}\xspace}
\newcommand{\chapref}[1]{Chapter~\ref{#1}\xspace}
\newcommand{\appref}[1]{Appendix~\ref{#1}\xspace}
\newcommand{\figref}[1]{Fig.~\ref{#1}\xspace}
\newcommand{\listref}[1]{Listing~\ref{#1}\xspace}
\newcommand{\tabref}[1]{Table~\ref{#1}\xspace}
\newcommand{\tool}[1]{{\sc #1}\xspace}
\newcommand{\highlight}[1]{{\color{purple} \textbf{#1}}}
\newcommand{\approach}{LEONID\xspace} %Log gEneratiON using Information retrieval and Deep learning
\newcommand{\java}{\emph{Java}\xspace}


\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
		\node[shape=circle,fill,inner sep=0.8pt] (char) {\textcolor{white}{#1}};}}

\def\BibTeX{{\rm B\kern-.05em{\sc i\kern-.025em b}\kern-.08em
		T\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX}}

\definecolor{gray50}{gray}{.5}
\definecolor{gray40}{gray}{.6}
\definecolor{gray30}{gray}{.7}
\definecolor{gray20}{gray}{.8}
\definecolor{gray10}{gray}{.9}
\definecolor{gray05}{gray}{.95}

\newlength\Linewidth
\def\findlength{\setlength\Linewidth\linewidth
	\addtolength\Linewidth{-4\fboxrule}
	\addtolength\Linewidth{-3\fboxsep}
}
\newenvironment{rqbox}{\par\begingroup
	\setlength{\fboxsep}{5pt}\findlength
	\setbox0=\vbox\bgroup\noindent
	\hsize=0.95\linewidth
	\begin{minipage}{0.95\linewidth}\normalsize}
	{\end{minipage}\egroup
	\textcolor{gray20}{\fboxsep1.5pt\fbox{\fboxsep5pt\colorbox{gray05}{\normalcolor\box0}}}
	\endgroup\par\noindent
	\normalcolor\ignorespacesafterend}

\definecolor{lightergray}{rgb}{0.9,0.9,0.9}
\newtcolorbox{resultbox}{colback=lightergray, arc=0.5mm, top=2mm, bottom=2mm, left=2mm, right=2mm}

\begin{document}


\title{Log Statements Generation via Deep Learning: Widening the Support Provided to Developers}


\author{Antonio Mastropaolo}
\affiliation{%
  \institution{SEART @  Software Institute, Universit\`a della Svizzera italiana}
  \city{Lugano}
  \country{Switzerland}
}
\email{antonio.mastropaolo@usi.ch}

\author{Valentina Ferrari}
\affiliation{%
 \institution{SEART @  Software Institute, Universit\`a della Svizzera italiana}
  \city{Lugano}
\country{Switzerland}
}
\email{valentina.ferrari@usi.ch}

\author{Luca Pascarella}
\affiliation{%
  \institution{Center for Project-Based Learning, ETH Zurich, Switzerland}
   \city{Zurich}
 \country{Switzerland}
}
  \email{lpascarella@ethz.ch}
\author{Gabriele Bavota}
\affiliation{%
  \institution{SEART @  Software Institute, Universit\`a della Svizzera italiana}
   \city{Lugano}
 \country{Switzerland}
} 
\email{gabriele.bavota@usi.ch}



\renewcommand{\shortauthors}{Mastropaolo et al.}



\begin{abstract}
	Logging helps keeping track of events occurring during software execution. Previous work stressed the challenges developers face when logging. These include: \emph{where} to log, \emph{what} information to log, and which \emph{log level} to use (\eg info, fatal). To support developers in all these decisions, we presented LANCE, a deep learning (DL)-based approach to automatically inject a log statement in a given Java method. While being the state-of-the-art in the automation of logging activities, LANCE suffers of two major limitations. First, given a method as input, LANCE always assumes that it requires the injection of exactly \emph{one} new log statement, even in cases in which \emph{no} additional log statements would be needed or \emph{multiple} log statement would be required. Second, LANCE is only able to generate meaningful log messages in 15.2\% of cases. In this work, we study how to address these limitations to widen the support provided to developers in terms of logging automation. We start by replicating LANCE on a dataset 3.6 times larger than the one used in our previous study.
	Then, we present \approach, an extension of LANCE which is able to (i) decide whether a given Java method would actually benefit from the injection of log statements (or if, instead, those are not needed); and (ii) support the injection of multiple log statements if needed, deciding how many statements are needed, where they should be placed, and what they should log. Finally, we also tried to boost the generation of meaningful log messages by combining information retrieval (IR) and DL. Our results show that: (i) \approach can accurately discriminate between methods needing and not needing the addition of log statements; (ii) \approach can support, when needed, the injection of multiple log statements in a given method with, however, a loss in performance as compared to the simpler single-log injection problem addressed by LANCE; (iii) by just increasing the size of the training dataset, LANCE's ability to predict meaningful log messages improves by a factor of two, approaching 30\%; (iv) \approach can only slightly improve the performance of LANCE in generating meaningful log messages thanks to the combination of DL and IR, thus calling for additional research on this specific problem.
\end{abstract}


\begin{CCSXML}
  <ccs2012>
  <concept>
  <concept_id>10011007.10011006.10011073</concept_id>
  <concept_desc>Software and its engineering~Software maintenance tools</concept_desc>
  <concept_significance>500</concept_significance>
  </concept>
  </ccs2012>
\end{CCSXML}

\ccsdesc[500]{Software and its engineering~Software maintenance tools}

\ccsdesc[500]{Software and its engineering}
\ccsdesc[300]{Software development techniques}


\keywords{software logging, pre-trained models of code}

%\received{20 February 2007}
%\received[revised]{12 March 2009}
%\received[accepted]{5 June 2009}
\maketitle

\input{introduction}
\input{approach}
\input{design}
\input{results}
\input{threats}
\input{related}
\input{conclusion}
%
\section{Acknowledgements}
	This project has received funding from the European Research Council (ERC) under the European Union's Horizon 2020 research and innovation programme (grant agreement No. 851720).


\bibliography{main}
\bibliographystyle{acm}

\end{document}


